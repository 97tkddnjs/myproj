<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dboard.myproj.common.dao.AuthDAO">
    <select id="memberRetrieval" resultType="com.dboard.myproj.data.entity.MemberVO">
        SELECT
            `email`         ,
            `password`      ,
            `member_name`   ,
            `address`       ,
            `party`         ,
            `grade_id`
        FROM MEMBER
    </select>

    <insert id="memberSave" parameterType="com.dboard.myproj.data.entity.MemberVO" >
        insert into CLASS_MEMBER(
            `MEMBER_ID`          ,
            `EMAIL`              ,
            `PASSWORD`           ,
            `MEMBER_NM`          ,
            `PHONE_NUM`          ,
            `PARTY`              ,
            `REG_DT`             ,
            `GRADE_ID`
        )
        values (
                   #{member_id}         ,
                   #{email}      ,
                   #{password}   ,
                   #{member_nm}       ,
                   #{phone_num}         ,
                   #{party}        ,
                   #{reg_dt}        ,
                    2
               )

    </insert>

    <select id="memberRetrievalById"
            parameterType="com.dboard.myproj.data.entity.MemberVO"
            resultType="com.dboard.myproj.data.entity.MemberVO"
    >
        SELECT
            `MEMBER_ID`         ,
            `EMAIL`      ,
            `PASSWORD`   ,
            `MEMBER_NM`       ,
            `PHONE_NUM`      ,
            `PARTY`         ,
            `GRADE_ID`      ,
            `REG_DT`
        FROM CLASS_MEMBER
        WHERE MEMBER_ID=#{member_id}
    </select>

    <select id="findClassCodes"
            resultType="com.dboard.myproj.data.entity.ClassCodeVO">

        SELECT
            `CLASS_ID`,
            `CLASS_NM`,
            `CLASS_YMD`
        FROM CLASS_CODE
    </select>

    <insert id="saveCourseReg" parameterType="com.dboard.myproj.data.dto.ClassCodeDTO">
        insert into COURSE_REGISTRATION(
            `MEMBER_ID`          ,
            `CLASS_ID`
        )
        values (
                   #{member_id}         ,
                   #{class_id}
               )

    </insert>
</mapper>